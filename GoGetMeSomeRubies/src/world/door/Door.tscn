[gd_scene load_steps=13 format=2]

[ext_resource path="res://src/world/door/rockDoorAgain.tres" type="ArrayMesh" id=1]
[ext_resource path="res://assets/tiles085/Tiles085_1K_Color.jpg" type="Texture" id=2]
[ext_resource path="res://assets/tiles091/Tiles091_1K_Color.jpg" type="Texture" id=3]
[ext_resource path="res://assets/tiles091/Tiles091_1K_Roughness.jpg" type="Texture" id=4]
[ext_resource path="res://assets/tiles091/Tiles091_1K_Normal.jpg" type="Texture" id=5]
[ext_resource path="res://src/world/door/Door.gd" type="Script" id=6]

[sub_resource type="Shader" id=1]
code = "/*
	ゆらゆらシェーダー by あるる（きのもと 結衣）
	Yurayura Shader by Yui Kinomoto @arlez80

	MIT License
*/
shader_type spatial;
// render_mode;

uniform float speed = 0.6;
uniform float ring_scale = 4.4;
uniform float wave_scale = 8.454;
uniform float random_scale = 4.6;
uniform float noise_scale = 0.03;


vec3 hsv2rgb( float h, float s, float v )
{
	return (
		(
			clamp(
				abs( fract( h + vec3( 0.0, 2.0, 1.0 ) / 3.0 ) * 6.0 - 3.0 ) - 1.0
			,	0.0
			,	1.0
			) - 1.0
		) * s + 1.0
	) * v;
}

vec2 random( vec2 pos )
{ 
	return fract(
		sin(
			vec2(
				dot(pos, vec2(12.1,78.233))
			,	dot(pos, vec2(-148.998,-65.233))
			)
		) * 43758.5453
	);
}

float value_noise( vec2 pos )
{
	vec2 p = floor( pos );
	vec2 f = fract( pos );

	float v00 = random( p + vec2( 0.0, 0.0 ) ).x;
	float v10 = random( p + vec2( 1.0, 0.0 ) ).x;
	float v01 = random( p + vec2( 0.0, 1.0 ) ).x;
	float v11 = random( p + vec2( 1.0, 1.0 ) ).x;

	vec2 u = f * f * ( 1.0 * f );

	return mix( mix( v00, v10, u.x ), mix( v01, v11, u.x ), u.y );
}

void fragment( )
{
	vec2 shift_uv = UV;
	shift_uv.x += value_noise( UV * random_scale + sin( TIME * speed ) );
	shift_uv.y += sin( cos( TIME ) * speed );
	float x = shift_uv.x + sin( shift_uv.y * wave_scale );
	float f = mod( x * ring_scale + random( UV ).x * noise_scale, 1.0 );

	ALBEDO = hsv2rgb( f, 1.0, 1.0 );
}
"

[sub_resource type="ShaderMaterial" id=2]
shader = SubResource( 1 )
shader_param/speed = 1.0
shader_param/ring_scale = 0.209
shader_param/wave_scale = 8.454
shader_param/random_scale = 0.0
shader_param/noise_scale = 0.025

[sub_resource type="CylinderMesh" id=3]
material = SubResource( 2 )
top_radius = 14.0
bottom_radius = 40.0
height = 63.702

[sub_resource type="SpatialMaterial" id=4]
albedo_texture = ExtResource( 2 )
roughness = 0.51
roughness_texture = ExtResource( 4 )
normal_enabled = true
normal_scale = -3.09
normal_texture = ExtResource( 5 )
ao_enabled = true
ao_light_affect = 0.0
ao_texture = ExtResource( 3 )
ao_on_uv2 = false
ao_texture_channel = 0

[sub_resource type="ConcavePolygonShape" id=5]
data = PoolVector3Array( -1, -1, 1, -1, 1, -1, -1, 1, 1, -1, -1, 1, -1, -1, -1, -1, 1, -1, -1, -1, -1, 1, 1, -1, -1, 1, -1, -1, -1, -1, 1, -1, -1, 1, 1, -1, 1, -1, -1, 1, 1, 1, 1, 1, -1, 1, -1, -1, 1, -1, 1, 1, 1, 1, 1, -1, 1, -1, 1, 1, 1, 1, 1, 1, -1, 1, -1, -1, 1, -1, 1, 1, -1, -1, -1, 1, -1, 1, 1, -1, -1, -1, -1, -1, -1, -1, 1, 1, -1, 1, 1, 1, -1, -1, 1, 1, -1, 1, -1, 1, 1, -1, 1, 1, 1, -1, 1, 1, -5.4779, 5.1217, -1, -6.7759, 6.6434, 1, -6.7759, 6.6434, -1, -5.4779, 5.1217, -1, -5.4779, 5.1217, 1, -6.7759, 6.6434, 1, -6.9996, 3.8238, 1, -6.7759, 6.6434, 1, -5.4779, 5.1217, 1, -6.9996, 3.8238, 1, -8.2975, 5.3454, 1, -6.7759, 6.6434, 1, -8.2975, 5.3454, 1, -6.7759, 6.6434, -1, -6.7759, 6.6434, 1, -8.2975, 5.3454, 1, -8.2975, 5.3454, -1, -6.7759, 6.6434, -1, -8.2975, 5.3454, -1, -6.9996, 3.8238, 1, -6.9996, 3.8238, -1, -8.2975, 5.3454, -1, -8.2975, 5.3454, 1, -6.9996, 3.8238, 1, -6.9996, 3.8238, -1, -5.4779, 5.1217, 1, -5.4779, 5.1217, -1, -6.9996, 3.8238, -1, -6.9996, 3.8238, 1, -5.4779, 5.1217, 1, -8.2975, 5.3454, -1, -5.4779, 5.1217, -1, -6.7759, 6.6434, -1, -8.2975, 5.3454, -1, -6.9996, 3.8238, -1, -5.4779, 5.1217, -1, -6.5688, 6.109, 1, -5.0472, 7.407, -1, -5.0472, 7.407, 1, -6.5688, 6.109, 1, -6.5688, 6.109, -1, -5.0472, 7.407, -1, -6.5688, 6.109, -1, -3.7493, 5.8853, -1, -5.0472, 7.407, -1, -6.5688, 6.109, -1, -5.2709, 4.5874, -1, -3.7493, 5.8853, -1, -5.2709, 4.5874, -1, -3.7493, 5.8853, 1, -3.7493, 5.8853, -1, -5.2709, 4.5874, -1, -5.2709, 4.5874, 1, -3.7493, 5.8853, 1, -5.2709, 4.5874, 1, -5.0472, 7.407, 1, -3.7493, 5.8853, 1, -5.2709, 4.5874, 1, -6.5688, 6.109, 1, -5.0472, 7.407, 1, -6.5688, 6.109, -1, -5.2709, 4.5874, 1, -5.2709, 4.5874, -1, -6.5688, 6.109, -1, -6.5688, 6.109, 1, -5.2709, 4.5874, 1, -3.7493, 5.8853, -1, -5.0472, 7.407, 1, -5.0472, 7.407, -1, -3.7493, 5.8853, -1, -3.7493, 5.8853, 1, -5.0472, 7.407, 1, -3.4281, 8.8294, 1.517, -0.7813, 7.3463, -1.517, -0.7813, 7.3463, 1.517, -3.4281, 8.8294, 1.517, -3.4281, 8.8294, -1.517, -0.7813, 7.3463, -1.517, -3.4281, 8.8294, -1.517, -2.2644, 4.6995, -1.517, -0.7813, 7.3463, -1.517, -3.4281, 8.8294, -1.517, -4.9112, 6.1826, -1.517, -2.2644, 4.6995, -1.517, -4.9112, 6.1826, -1.517, -2.2644, 4.6995, 1.517, -2.2644, 4.6995, -1.517, -4.9112, 6.1826, -1.517, -4.9112, 6.1826, 1.517, -2.2644, 4.6995, 1.517, -4.9112, 6.1826, 1.517, -0.7813, 7.3463, 1.517, -2.2644, 4.6995, 1.517, -4.9112, 6.1826, 1.517, -3.4281, 8.8294, 1.517, -0.7813, 7.3463, 1.517, -3.4281, 8.8294, -1.517, -4.9112, 6.1826, 1.517, -4.9112, 6.1826, -1.517, -3.4281, 8.8294, -1.517, -3.4281, 8.8294, 1.517, -4.9112, 6.1826, 1.517, -2.2644, 4.6995, -1.517, -0.7813, 7.3463, 1.517, -0.7813, 7.3463, -1.517, -2.2644, 4.6995, -1.517, -2.2644, 4.6995, 1.517, -0.7813, 7.3463, 1.517, -1.823, 6.6678, 1.5811, -1.1641, 9.4023, -1.5811, -1.1641, 9.4023, 1.5811, -1.823, 6.6678, 1.5811, -1.823, 6.6678, -1.5811, -1.1641, 9.4023, -1.5811, -1.823, 6.6678, -1.5811, 2.2122, 7.4625, -1.5811, -1.1641, 9.4023, -1.5811, -1.823, 6.6678, -1.5811, 0.5347, 5.9796, -1.5811, 2.2122, 7.4625, -1.5811, 0.4518, 6.0472, 1.571, -1.1641, 9.4023, 1.5811, 2.2431, 7.5018, 1.5821, 0.4518, 6.0472, 1.571, -1.823, 6.6678, 1.5811, -1.1641, 9.4023, 1.5811, -1.823, 6.6678, -1.5811, 0.4518, 6.0472, 1.571, 0.5347, 5.9796, -1.5811, -1.823, 6.6678, -1.5811, -1.823, 6.6678, 1.5811, 0.4518, 6.0472, 1.571, 2.2122, 7.4625, -1.5811, -1.1641, 9.4023, 1.5811, -1.1641, 9.4023, -1.5811, 2.2122, 7.4625, -1.5811, 2.2431, 7.5018, 1.5821, -1.1641, 9.4023, 1.5811, -2.7866, -1.514, 1, -1.265, -0.216, -1, -1.265, -0.216, 1, -2.7866, -1.514, 1, -2.7866, -1.514, -1, -1.265, -0.216, -1, -2.7866, -1.514, -1, 0.0329, -1.7377, -1, -1.265, -0.216, -1, -2.7866, -1.514, -1, -1.4887, -3.0356, -1, 0.0329, -1.7377, -1, -1.4887, -3.0356, -1, 0.0329, -1.7377, 1, 0.0329, -1.7377, -1, -1.4887, -3.0356, -1, -1.4887, -3.0356, 1, 0.0329, -1.7377, 1, -1.4887, -3.0356, 1, -1.265, -0.216, 1, 0.0329, -1.7377, 1, -1.4887, -3.0356, 1, -2.7866, -1.514, 1, -1.265, -0.216, 1, -2.7866, -1.514, -1, -1.4887, -3.0356, 1, -1.4887, -3.0356, -1, -2.7866, -1.514, -1, -2.7866, -1.514, 1, -1.4887, -3.0356, 1, 0.0329, -1.7377, -1, -1.265, -0.216, 1, -1.265, -0.216, -1, 0.0329, -1.7377, -1, 0.0329, -1.7377, 1, -1.265, -0.216, 1, -1.0315, 3.155, 1.517, 1.8145, 4.2062, -1.517, 1.8145, 4.2062, 1.517, -1.0315, 3.155, 1.517, -1.0315, 3.155, -1.517, 1.8145, 4.2062, -1.517, -1.0315, 3.155, -1.517, 2.8658, 1.3602, -1.517, 1.8145, 4.2062, -1.517, -1.0315, 3.155, -1.517, 0.0197, 0.3089, -1.517, 2.8658, 1.3602, -1.517, 0.0197, 0.3089, -1.517, 2.8658, 1.3602, 1.517, 2.8658, 1.3602, -1.517, 0.0197, 0.3089, -1.517, 0.0197, 0.3089, 1.517, 2.8658, 1.3602, 1.517, 0.0197, 0.3089, 1.517, 1.8145, 4.2062, 1.517, 2.8658, 1.3602, 1.517, 0.0197, 0.3089, 1.517, -1.0315, 3.155, 1.517, 1.8145, 4.2062, 1.517, -1.0315, 3.155, -1.517, 0.0197, 0.3089, 1.517, 0.0197, 0.3089, -1.517, -1.0315, 3.155, -1.517, -1.0315, 3.155, 1.517, 0.0197, 0.3089, 1.517, 2.8658, 1.3602, -1.517, 1.8145, 4.2062, 1.517, 1.8145, 4.2062, -1.517, 2.8658, 1.3602, -1.517, 2.8658, 1.3602, 1.517, 1.8145, 4.2062, 1.517, 1.5239, 3.0438, 1.5811, 0.5347, 5.9796, -1.5811, 0.4518, 6.0472, 1.571, 1.5239, 3.0438, 1.5811, 1.5239, 3.0438, -1.5811, 0.5347, 5.9796, -1.5811, 1.5239, 3.0438, -1.5811, 2.2122, 7.4625, -1.5811, 0.5347, 5.9796, -1.5811, 1.5239, 3.0438, -1.5811, 4.0774, 4.909, -1.5811, 2.2122, 7.4625, -1.5811, 4.0774, 4.909, -1.5811, 2.2431, 7.5018, 1.5821, 2.2122, 7.4625, -1.5811, 4.0774, 4.909, -1.5811, 4.0774, 4.909, 1.5811, 2.2431, 7.5018, 1.5821, 4.0774, 4.909, 1.5811, 0.4518, 6.0472, 1.571, 2.2431, 7.5018, 1.5821, 4.0774, 4.909, 1.5811, 1.5239, 3.0438, 1.5811, 0.4518, 6.0472, 1.571, 1.5239, 3.0438, -1.5811, 4.0774, 4.909, 1.5811, 4.0774, 4.909, -1.5811, 1.5239, 3.0438, -1.5811, 1.5239, 3.0438, 1.5811, 4.0774, 4.909, 1.5811, 2.2122, 7.4625, -1.5811, 0.4518, 6.0472, 1.571, 0.5347, 5.9796, -1.5811, 2.2122, 7.4625, -1.5811, 2.2431, 7.5018, 1.5821, 0.4518, 6.0472, 1.571 )

[sub_resource type="BoxShape" id=6]
extents = Vector3( 29.0587, 31.3326, 7.40271 )

[node name="Door" type="Spatial"]
script = ExtResource( 6 )

[node name="MeshInstance2" type="MeshInstance" parent="."]
transform = Transform( -1, 0, -2.22054e-08, 0, 1, 0, 8.74228e-08, 0, -0.254, 5, 28.2749, 0 )
cast_shadow = 0
mesh = SubResource( 3 )
material/0 = null
__meta__ = {
"_edit_lock_": true
}

[node name="MeshInstance" type="MeshInstance" parent="."]
transform = Transform( 6.32436, -5.87464, 0, 6.32436, 5.87464, 0, 0, 0, 14.551, 38, 17, 0 )
material_override = SubResource( 4 )
mesh = ExtResource( 1 )
material/0 = null

[node name="StaticBody" type="StaticBody" parent="MeshInstance"]

[node name="CollisionShape" type="CollisionShape" parent="MeshInstance/StaticBody"]
shape = SubResource( 5 )

[node name="OmniLight" type="SpotLight" parent="."]
transform = Transform( -1, 0, 0, 0, 0.965926, 0.258819, 0, 0.258819, -0.965926, 3.84655, 40.3523, -0.792248 )
light_energy = 16.0
shadow_enabled = true
shadow_reverse_cull_face = true
spot_range = 118.659
spot_angle = 52.4065

[node name="Area" type="Area" parent="."]

[node name="CollisionShape" type="CollisionShape" parent="Area"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 23, 0 )
shape = SubResource( 6 )
